from cProfile import label
from operator import truediv
import maya.cmds as cmds
import os
global path
global objCategory
global seqCategory

#Location data
path = "C:/Users/Anthony/Documents/Assessment2_GroupX/scenes/wip"
filepath = cmds.file(q=True, sn=True)
filename = filepath.split('/')[-1]
objname = filename.split('_')[0]
folderpath = '/'.join(filepath.split('/')[:-1])+'/'
location = filepath.split('/')[-6]
pubFolderpath = folderpath.split(location)[0]+'publish'+folderpath.split(location)[1]
selected = cmds.ls(sl=True)

def SavePublishTool():
    if cmds.window('SavePublishTool', exists = True):
        cmds.deleteUI('SavePublishTool')
        
    cmds.window('SavePublishTool', resizeToFitChildren=True)
    
 #   cmds.window('SavePublishTool', widthHeight=(200, 450))

    cmds.columnLayout(adjustableColumn = True)
    
    cmds.separator(h=10)
    cmds.text(label = "File", align = "center")
    cmds.text(label = filename, align = "center", font = "boldLabelFont")
    cmds.separator(h=10)
    
    cmds.text(label = "Selected items", align = "center")
    cmds.text( selected, align = "center", font = "boldLabelFont")
    cmds.separator(h=10)

    cmds.separator(h=10)
    cmds.button(label = "Save", align = "center", command=SaveFile)
    cmds.button(label = "Publish", align = "center")
    cmds.separator(h=10)
    
    cmds.showWindow('SavePublishTool')


def SaveFile(*args):
    result = cmds.promptDialog(title = 'Save As new version', message='Please enter the version number you would like to save as', button= ['OK', 'Cancel'], defaultButton='OK', cancelButton='Cancel', dismissString='Cancel')
    
    if result == 'OK':
        fileName = cmds.promptDialog(query=True, text=True)
	    
        cmds.file( rename = fileName)
        cmds.file( save=True , type = 'mayaAscii')
        cmds.confirmDialog(m='New version saved to Project Folder')
    
SavePublishTool()
